# DESCRIPTION   This file has recommended package settings for GCHP
#               dependencies. It is meant to be used by including
#               GCHP/spack as a custom scope for spack.
#
# HOW TO UPGRADE
#   1. Update pacakge.<package-name>.version to the appropriate version number
#   2. Check for changes to the variants by running
#      `spack info <package-name>@<version>`.
#      Only the required extensions should be enabled.
#   3. Verify install spec with updated geoschem-deps/package.yaml by running
#        spack -C GCHP/spack spec -I esmf%gcc ^openmpi
#      Check for duplicate installs (same package different hash)
#      and unnecessary dependencies.

packages:
    #
    # Compiler
    #
    gcc:
        version: [10.2.0]
    #
    # GCHP dependencies
    #
    cmake:
        version: [3.22.2]
        variants: ~doc~ncurses+openssl+ownlibs~qt
        compiler: [gcc@10.2.0]
    esmf:
        version: [8.3.1]
        variants: ~pio~pnetcdf~xerces
        compiler: [gcc@10.2.0]
    hdf5:
        variants: ~mpi
        compiler: [gcc@10.2.0]
    netcdf-c:
        version: [4.8.1]
        variants: ~dap~fsync~hdf4~jna~mpi~parallel-netcdf+pic+shared
        compiler: [gcc@10.2.0]
    netcdf-fortran:
        version: [4.5.3]
        variants: ~doc+pic+shared
        compiler: [gcc@10.2.0]
    openmpi:
        version: [4.1.0]
        variants: ~doc+auto+pmi
        compiler: [gcc@10.2.0]
    #
    # Auxiliary packages
    #
    cdo:
        compiler: [gcc@10.2.0]
    flex:
        compiler: [gcc@10.2.0]
    nco:
        compiler: [gcc@10.2.0]
    ncview:
        compiler: [gcc@10.2.0]
    tau:
        variants: +pthread+openmp~otf2
        compiler: [gcc@10.2.0]
    #
    # Settings for all packages
    #
    all:
        target: [x86_64]
        providers:
            mpi: [openmpi]
